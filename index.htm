<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EKUSFM by ESTACIONKUSMEDIOS</title>
  <!-- FontAwesome CDN para iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1e293b">
  <link rel="icon" type="image/png" href="icon.png">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="stylesheet" href="style.css">
  <!-- CSS MENÚ Y OVERLAY -->
  <style>
    /* --- MENÚ LATERAL --- */
    #menu {
      display: none;
      position: fixed;
      top: 0; left: 0; bottom: 0;
      width: 280px;
      max-width: 90vw;
      background: #1e293b;
      color: #fff;
      z-index: 10500;
      transition: transform 0.22s cubic-bezier(.4,0,.2,1), box-shadow 0.22s;
      transform: translateX(-100%);
      box-shadow: 2px 0 16px rgba(30,41,59,0.13);
      overflow-y: auto;
      padding-bottom: 48px;
    }
    #menu.open {
      display: block;
      transform: translateX(0);
    }
    .overlay {
      display: none;
      position: fixed; left:0; top:0; right:0; bottom:0;
      background: rgba(30,41,59, 0.7);
      z-index: 10499;
      transition: opacity 0.22s;
    }
    .overlay.active {
      display: block;
    }
    .menu-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 22px 10px 22px;
      border-bottom: 1px solid #334155;
    }
    .menu-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #0ea5e9;
    }
    .close-menu {
      background: transparent;
      border: none;
      color: #fff;
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.12s;
    }
    .close-menu:hover { color: #f87171; }
    .menu-section {
      padding: 18px 22px;
    }
    .menu-section-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: #38bdf8;
    }
    .menu-links {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .menu-link {
      display: flex;
      align-items: center;
      gap: 12px;
      color: #fff;
      padding: 10px 0;
      text-decoration: none;
      font-size: 1rem;
      border-radius: 6px;
      transition: background 0.14s, color 0.14s;
    }
    .menu-link:hover {
      background: #334155;
      color: #0ea5e9;
    }
    .menu-links li:not(:last-child) {
      border-bottom: 1px solid #334155;
    }
    @media (max-width: 700px) {
      #menu {
        width: 96vw;
        max-width: 96vw;
        font-size: 1.05rem;
      }
    }
    #menu, .overlay {
      z-index: 9999;
    }
    body.menu-open {
      overflow: hidden;
    }
    /* --- BOTÓN FIX --- */
    #fixBtn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 10010;
      background: #1e293b;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.22);
      font-size: 2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #fixBtn:active { background: #334155; }
    #fixAlert {
      position: fixed;
      bottom: 90px;
      right: 24px;
      background: #fff;
      color: #222;
      border-radius: 8px;
      padding: 15px 22px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      font-size: 1rem;
      z-index: 10020;
      display: none;
    }
  </style>
</head>
<body>
  <img id="background" class="background" src="/placeholder.svg" alt="Background">
  <div class="overlay"></div>
  <div class="header">
    <div class="logo" id="radio-name">
      EKUSMEDIOS
    </div>
    <button class="menu-btn" id="menuBtn">
      <i class="fas fa-bars"></i>
    </button>
  </div>
  <div class="main-content">
    <!-- ... tu contenido principal ... -->
  </div>
  <div class="menu" id="menu">
    <div class="menu-header">
      <div class="menu-title" id="menu-title">Menú</div>
      <button class="close-menu" id="close-menu">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="menu-section">
      <h3 class="menu-section-title">Opciones</h3>
      <ul class="menu-links">
        <li><a href="#" class="menu-link" id="historyLink"><i class="fas fa-history"></i> Historial de canciones</a></li>
        <li><a href="#" class="menu-link" id="aboutLink"><i class="fas fa-info-circle"></i> Acerca de</a></li>
        <li><a href="#" class="menu-link" id="shareLink"><i class="fas fa-share-alt"></i> Compartir</a></li>
        <li><a href="novedades.htm" class="menu-link"><i class="fas fa-newspaper"></i> Novedades</a></li>
      </ul>
    </div>
    <div class="menu-section">
      <h3 class="menu-section-title">Redes Sociales</h3>
      <ul class="menu-links" id="menu-social-links">
        <!-- Social links will be added dinámicamente -->
      </ul>
    </div>
  </div>
  <!-- Botón Fix -->
  <button id="fixBtn" title="Solucionar problemas"><i class="fas fa-wrench"></i></button>
  <div id="fixAlert"></div>
  <!-- ... el resto de tus modales, reproductor, etc ... -->
  <audio id="audio" preload="auto"></audio>
  <!-- JS MENÚ, SEGURIDAD Y FIX -->
  <script>
    // 🎵 VARIABLES CONFIGURABLES 🎵
    const config = {
        nombreRadio: "EKUSFM", // <--- SI CAMBIAS ESTO, EL SITIO SE BLOQUEA
        nombreDesarrollador: "ESTACIONKUSMEDIOS",
        logoURL: "https://aventura.estacionkusmedios.com/img/default.jpg",
        fondoURL: "https://images.unsplash.com/photo-1478737270239-2f02b77fc618?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cmFkaW98ZW58MHx8MHx8fDA%3D",
        streamURL: "https://radio.estacionkusmedios.com/listen/esmerosound/radio.mp3",
        azuracastURL: "https://radio.estacionkusmedios.com",
        azuracastStation: "esmerosound",
        albumCover: "https://aventura.estacionkusmedios.com/img/default.jpg",
        aboutDeveloper: "ESTACIONKUSMEDIOS BASED IN CRISPRO CODE Adapted Azuracast",
        textoEmitiendo: "Transmitiendo en vivo desde nuestra estación 🎙️",
        textoSonandoAhora: "Actualmente en reproducción 🎶",
        textoCompartir: "¡Escucha la mejor música en ESTACIONKUSFM! 🎵🔥",
        redesSociales: [
          { url: "https://web.facebook.com/ekusfm", icon: "fab fa-facebook" },
          { url: "https://www.instagram.com/estacionkusfm/", icon: "fab fa-instagram" },
          { url: "https://www.youtube.com/estacionkusfm", icon: "fab fa-youtube" },
          { url: "https://api.whatsapp.com/send/?phone=51984335569&text&type=phone_number&app_absent=0", icon: "fab fa-whatsapp" }
        ],
        descripcion: "Radio ESTACIONKUSFM es una estación de radio online dedicada a traerte la mejor música y entretenimiento. Disfruta de una selección musical variada y de calidad las 24 horas del día.",
        estado: "online" // online, offline, maintenance, disabled, desactivated
    };

    // SEGURIDAD: Solo funciona si el nombre de la radio es EKUSFM
    (function() {
      const alertaNoAutorizada = () => {
        document.body.innerHTML = `
          <div style="text-align:center;padding:40px;color:#fff;background:#1e293b;height:100vh">
            <h1 style="color:#ff4444;font-size:2.5rem;">Página NO Autorizada</h1>
            <p style="font-size:1.2rem;">Esta web solo puede ser utilizada por <b>EKUSFM</b>.<br>
            Si eres el responsable, contacta a <a href="https://estacionkusmedios.org" style="color:#0ff;" target="_blank">estacionkusmedios.org</a>
            </p>
          </div>`;
        document.title = "No autorizado";
      };
      if (typeof config === "undefined" || config.nombreRadio !== "EKUSFM") {
        setTimeout(alertaNoAutorizada, 100);
        throw new Error("Sitio no autorizado por estacionkusmedios.org");
      }
    })();

    // MENÚ LATERAL
    const menuBtn = document.getElementById('menuBtn');
    const menu = document.getElementById('menu');
    const closeMenuBtn = document.getElementById('close-menu');
    const overlay = document.querySelector('.overlay');
    // Abrir menú
    menuBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      menu.classList.add('open');
      overlay.classList.add('active');
      document.body.classList.add('menu-open');
    });
    // Cerrar menú
    closeMenuBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      menu.classList.remove('open');
      overlay.classList.remove('active');
      document.body.classList.remove('menu-open');
    });
    overlay.addEventListener('click', () => {
      menu.classList.remove('open');
      overlay.classList.remove('active');
      document.body.classList.remove('menu-open');
    });
    document.addEventListener('click', function(e) {
      if (
        menu.classList.contains('open') &&
        !menu.contains(e.target) &&
        !menuBtn.contains(e.target)
      ) {
        menu.classList.remove('open');
        overlay.classList.remove('active');
        document.body.classList.remove('menu-open');
      }
    });
    menu.addEventListener('click', function(e) { e.stopPropagation(); });
    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape") {
        menu.classList.remove('open');
        overlay.classList.remove('active');
        document.body.classList.remove('menu-open');
      }
    });
    window.addEventListener('pageshow', function() {
      menu.classList.remove('open');
      overlay.classList.remove('active');
      document.body.classList.remove('menu-open');
    });

    // BOTÓN FIX
    const fixBtn = document.getElementById('fixBtn');
    const fixAlert = document.getElementById('fixAlert');
    function showFixAlert(text, time=3500) {
      fixAlert.textContent = text;
      fixAlert.style.display = 'block';
      setTimeout(() => { fixAlert.style.display = 'none'; }, time);
    }
    fixBtn.onclick = () => {
      // Repara menú
      menuBtn.disabled = false;
      closeMenuBtn.disabled = false;
      menu.classList.remove('open');
      overlay.classList.remove('active');
      document.body.classList.remove('menu-open');
      showFixAlert('¡Solucionado! Si persiste el problema, recarga la página.');
    };
  </script>
</body>
</html>